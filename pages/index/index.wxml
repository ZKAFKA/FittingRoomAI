<view class="container">
  <view class="header" wx:if="{{!loading && !error}}">
    <view class="user-info" wx:if="{{userInfo}}">
      <image class="avatar" src="{{userInfo.avatarUrl || 'cloud://fittingroom-0g0zcm3w1d2f40c5.6669-fittingroom-0g0zcm3w1d2f40c5-1400377926/system-images/default-avatar.jpg'}}" />
      <view class="user-details">
        <text class="welcome">æ¬¢è¿å›æ¥ï¼Œ{{userInfo.nickName || 'ç”¨æˆ·'}}</text>
        <text class="stats">å·²è¯•è¡£ {{tryonCount}} æ¬¡</text>
      </view>
    </view>
    <view class="user-info" wx:else>
      <image class="avatar" src="cloud://fittingroom-0g0zcm3w1d2f40c5.6669-fittingroom-0g0zcm3w1d2f40c5-1400377926/system-images/default-avatar.jpg" />
      <view class="user-details">
        <text class="welcome">æ¬¢è¿ä½¿ç”¨è¯•è¡£é—´AI+</text>
        <text class="stats">å¼€å§‹æ‚¨çš„è™šæ‹Ÿè¯•è¡£ä¹‹æ—…</text>
      </view>
    </view>
  </view>

  <view class="quick-actions">
    <view class="action-card" bindtap="startTryon">
      <view class="action-icon">ğŸ‘”</view>
      <text class="action-text">å¼€å§‹è¯•è¡£</text>
    </view>
    <view class="action-card" bindtap="goToWardrobe">
      <view class="action-icon">ğŸ§¥</view>
      <text class="action-text">æˆ‘çš„è¡£æŸœ
        <text class="count">({{wardrobeCount}})</text>
      </text>
    </view>
    <view class="action-card" bindtap="goToHistory">
      <view class="action-icon">ğŸ“‹</view>
      <text class="action-text">è¯•è¡£è®°å½•</text>
    </view>
    <view class="action-card" bindtap="goToInspirations">
      <view class="action-icon">ğŸ’¡</view>
      <text class="action-text">æ—¶å°šçµæ„Ÿ
        <text class="count">({{inspirationCount}})</text>
      </text>
    </view>
  </view>

  <view class="section" wx:if="{{recentTryons.length > 0 && !loading && !error}}">
    <view class="section-header">
      <text class="section-title">æœ€è¿‘è¯•è¡£</text>
      <text class="section-more" bindtap="goToHistory">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <scroll-view class="tryon-list" scroll-x>
      <view class="tryon-item" wx:for="{{recentTryons}}" wx:key="_id" data-id="{{_id}}" bindtap="viewTryonDetail">
        <image class="tryon-image" src="{{item.resultImage}}" />
        <text class="tryon-time">{{item.createTime ? item.createTime.toLocaleDateString() : ''}}</text>
      </view>
    </scroll-view>
  </view>

  <view class="section" wx:if="{{recommendedInspirations.length > 0 && !loading && !error}}">
    <view class="section-header">
      <text class="section-title">æ¨èçµæ„Ÿ</text>
      <text class="section-more" bindtap="goToInspirations">æŸ¥çœ‹å…¨éƒ¨</text>
    </view>
    <scroll-view class="inspiration-list" scroll-x>
      <view class="inspiration-item" wx:for="{{recommendedInspirations}}" wx:key="_id">
        <image class="inspiration-image" src="{{item.imageUrl}}" />
        <text class="inspiration-title">{{item.title}}</text>
      </view>
    </scroll-view>
  </view>

  <view class="loading" wx:if="{{loading}}">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <view class="error" wx:if="{{error}}">
    <text>{{error}}</text>
    <button class="retry-btn" bindtap="handleError">é‡è¯•</button>
  </view>
</view>