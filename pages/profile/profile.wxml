<view class="page">
  <!-- Header -->
  <view class="header">
    <view class="relative" bindtap="showEditAvatar">
      <view class="avatar-container">
        <image class="avatar" src="{{userInfo.avatarUrl && userInfo.avatarUrl !== '' ? userInfo.avatarUrl : defaultAvatarUrl}}" mode="aspectFill"></image>
      </view>
    </view>
    <view class="user-info">
      <view class="user-name">{{userInfo.nickName || '微信用户'}}</view>
    </view>
  </view>

  <!-- Body Profile Section -->
  <view class="body-profile-section">
    <view class="body-profile-card" bindtap="showEditBodyInfo">
      <view class="profile-content">
        <view class="profile-item">
          <view class="profile-label">{{langData.profile.height || 'HEIGHT'}}</view>
          <view class="profile-value">{{userInfo.height || '--'}}<text class="unit" wx:if="{{userInfo.height}}">cm</text></view>
        </view>
        <view class="profile-divider"></view>
        <view class="profile-item">
          <view class="profile-label">{{langData.profile.weight || 'WEIGHT'}}</view>
          <view class="profile-value">{{userInfo.weight || '--'}}<text class="unit" wx:if="{{userInfo.weight}}">kg</text></view>
        </view>
        <view class="profile-divider"></view>
        <view class="profile-item">
          <view class="profile-label">{{langData.profile.gender || 'GENDER'}}</view>
          <view class="profile-value">{{userInfo.gender || '--'}}</view>
        </view>
      </view>
    </view>
  </view>

  <!-- Featured Grid -->
  <view class="featured-grid">
    <view class="featured-card wardrobe-card" bindtap="navigateToWardrobe">
      <view class="card-gradient"></view>
      <image class="card-image" src="cloud://fittingroom-0g0zcm3w1d2f40c5.6669-fittingroom-0g0zcm3w1d2f40c5-1400377926/system-images/wardrobe.png" mode="aspectFill" />
      <view class="card-content">
        <image class="card-icon" src="/assets/icons/hanger.png"></image>
        <view class="card-info">
          <text class="card-title">{{langData.profile.myWardrobe || '我的衣橱'}}</text>
          <text class="card-subtitle">{{langData.profile.clothingCount || '24 件服装'}}</text>
        </view>
      </view>
    </view>
    <view class="featured-card history-card" bindtap="navigateToHistory">
      <view class="card-gradient primary-gradient"></view>
      <image class="card-image" src="cloud://fittingroom-0g0zcm3w1d2f40c5.6669-fittingroom-0g0zcm3w1d2f40c5-1400377926/system-images/history.png" mode="aspectFill" />
      <view class="card-content">
        <image class="card-icon" src="/assets/icons/history.png"></image>
        <view class="card-info">
          <text class="card-title">{{langData.profile.tryonHistory || '试衣记录'}}</text>
          <text class="card-subtitle">{{langData.profile.tryonCount || '128 次试衣'}}</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Menu List -->
  <view class="menu-section">
    <view class="menu-list">
      <view class="menu-item" bindtap="navigateToSettings">
        <view class="menu-item-left">
          <view class="menu-icon-bg">
            <image class="menu-icon-img" src="/assets/icons/settings.png" mode="aspectFit"></image>
          </view>
          <text class="menu-label">{{langData.profile.settings || '设置'}}</text>
        </view>
        <image class="menu-chevron" src="/assets/icons/arrow.png" mode="aspectFit"></image>
      </view>
      <view class="menu-item" bindtap="navigateToAbout">
        <view class="menu-item-left">
          <view class="menu-icon-bg">
            <image class="menu-icon-img" src="/assets/icons/contact.png" mode="aspectFit"></image>
          </view>
          <text class="menu-label">{{langData.profile.about || '关于我们'}}</text>
        </view>
        <image class="menu-chevron" src="/assets/icons/arrow.png" mode="aspectFit"></image>
      </view>
      <view class="menu-item" bindtap="navigateToTestHunyuan">
        <view class="menu-item-left">
          <view class="menu-icon-bg" style="background-color: #ff6b6b;">
            <image class="menu-icon-img" src="/assets/icons/test.png" mode="aspectFit"></image>
          </view>
          <text class="menu-label">混元生图测试</text>
        </view>
        <image class="menu-chevron" src="/assets/icons/arrow.png" mode="aspectFit"></image>
      </view>
    </view>
  </view>

  <!-- 身高体重编辑组件 -->
  <body-info-editor 
    visible="{{showBodyInfoEditor}}" 
    height="{{userInfo.height}}" 
    weight="{{userInfo.weight}}" 
    gender="{{userInfo.gender}}"
    bind:confirm="handleBodyInfoConfirm" 
    bind:cancel="handleBodyInfoCancel" 
  />
</view>
