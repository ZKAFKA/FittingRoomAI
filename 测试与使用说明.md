# 试衣间AI+ 测试与使用说明

## 项目概述

试衣间AI+是一款基于微信小程序的虚拟试衣应用，集成了HunyuanImage API的能力，为用户提供智能的虚拟试衣体验。

## 项目结构

```
FittingRoomAI+
├── pages/                 # 页面目录
│   ├── index/            # 首页
│   ├── tryon/            # 试衣页面
│   ├── wardrobe/         # 衣柜页面
│   ├── profile/          # 个人中心
│   └── ...               # 其他页面
├── cloudfunctions/       # 云函数目录
│   ├── login/            # 登录云函数
│   ├── generateImage-wndKh7/ # 图片生成云函数
│   └── ...               # 其他云函数
├── utils/                # 工具类目录
│   ├── auth.js           # 认证工具
│   ├── cache.js          # 缓存工具
│   └── feedback.js       # 反馈工具
├── components/           # 组件目录
│   └── navigation-bar/   # 导航栏组件
├── custom-tab-bar/       # 自定义TabBar
└── app.js                # 应用入口
```

## 核心功能

### 1. 首页
- 用户信息展示
- 快捷操作入口
- 最近试衣记录
- 推荐灵感

### 2. 试衣页面
- 照片上传
- 服装选择
- 试衣参数调整
- 试衣效果生成

### 3. 衣柜页面
- 服装列表展示
- 分类筛选
- 搜索功能
- 服装管理

### 4. 个人中心
- 用户资料管理
- 体貌特征设置
- 系统设置
- 关于我们

## 测试步骤

### 环境准备
1. **开通云开发**
   - 登录微信开发者工具
   - 点击"云开发"按钮
   - 开通云开发环境

2. **配置环境ID**
   - 打开 `app.js` 文件
   - 修改 `env` 配置为您的云开发环境ID

3. **部署云函数**
   - 右键点击 `cloudfunctions` 目录
   - 选择"上传并部署：云端安装依赖"
   - 等待部署完成

4. **配置API密钥**
   - 打开 `cloudfunctions/generateImage-wndKh7/index.js`
   - 填写 `API_CONFIG` 中的密钥信息

### 功能测试

#### 测试1：登录功能
1. **操作步骤**
   - 编译并运行小程序
   - 观察控制台是否有登录错误
   - 检查是否成功获取用户信息

2. **预期结果**
   - 控制台显示"登录成功"
   - 首页显示用户信息

#### 测试2：虚拟试衣
1. **操作步骤**
   - 进入试衣页面
   - 上传一张正面全身照
   - 选择一件服装
   - 点击"开始试衣"

2. **预期结果**
   - 显示"生成中..."提示
   - 生成成功后显示试衣效果
   - 可以保存或分享试衣效果

#### 测试3：衣柜管理
1. **操作步骤**
   - 进入衣柜页面
   - 点击"添加服装"
   - 上传服装照片并填写信息
   - 查看服装列表

2. **预期结果**
   - 成功添加服装
   - 服装列表显示新增的服装
   - 可以分类筛选和搜索服装

#### 测试4：数据存储
1. **操作步骤**
   - 完成几次虚拟试衣
   - 进入历史记录页面
   - 查看试衣记录

2. **预期结果**
   - 历史记录显示所有试衣记录
   - 可以查看详细的试衣信息
   - 可以分享或删除试衣记录

## 常见问题

### Q1：登录失败，提示"FunctionName parameter could not be found"
**A**：请检查云函数是否已部署成功
- 右键点击 `cloudfunctions/login` 文件夹
- 选择"上传并部署：云端安装依赖"
- 等待部署完成后重新测试

### Q2：试衣效果生成失败
**A**：
1. 检查网络连接是否正常
2. 检查API密钥是否正确配置
3. 检查照片是否符合要求（正面全身照）

### Q3：衣柜页面显示"暂无服装"
**A**：
1. 点击"添加服装"按钮
2. 上传服装照片并填写详细信息
3. 保存后刷新页面

### Q4：页面加载缓慢
**A**：
1. 检查网络连接
2. 清理小程序缓存
3. 确保云函数已正确部署

### Q5：分享功能不可用
**A**：
1. 确保已生成试衣效果
2. 检查小程序分享权限设置
3. 检查网络连接

## 性能优化建议

1. **图片优化**
   - 上传图片前进行压缩
   - 使用适当的图片格式和尺寸

2. **缓存策略**
   - 合理使用本地缓存
   - 定期清理过期缓存

3. **网络请求**
   - 批量请求减少网络开销
   - 使用缓存减少重复请求

4. **代码优化**
   - 减少不必要的渲染
   - 使用异步编程提高响应速度

## 安全注意事项

1. **API密钥保护**
   - 不要在前端代码中暴露API密钥
   - 在云函数中安全存储密钥

2. **用户数据保护**
   - 合理设置数据库权限
   - 加密存储敏感信息

3. **网络安全**
   - 使用HTTPS协议
   - 验证用户输入

## 部署建议

1. **生产环境**
   - 使用独立的云开发环境
   - 配置CDN加速
   - 监控系统性能

2. **测试环境**
   - 使用单独的测试环境
   - 定期清理测试数据

## 技术支持

### 联系方式
- 微信：xxx
- 邮箱：xxx@example.com

### 常见问题解答

**Q**：如何获取HunyuanImage API密钥？
**A**：登录腾讯云控制台，在HunyuanImage服务中申请API密钥。

**Q**：如何提高试衣效果的准确性？
**A**：
1. 上传清晰的正面全身照
2. 确保照片光线充足
3. 穿着贴身衣物拍照

**Q**：如何添加更多服装？
**A**：
1. 进入衣柜页面
2. 点击"添加服装"
3. 上传服装照片并填写详细信息

## 更新日志

### v1.0.0
- 初始化项目
- 实现核心功能
- 集成HunyuanImage API
- 优化用户体验

### v1.0.1
- 修复登录云函数调用错误
- 优化图片生成逻辑
- 增加错误处理机制
- 改进用户界面

## 许可证

本项目采用 MIT 许可证。
